# Scripting
scripting หมายถึงการเขียนชุดคำสั่ง โดยชุดคำสั่งนั้นสามารถทำงานได้โดยอัตโนมัติโดยไม่ต้องมีการคอมไพล์เป็นขั้น ก่อนการรันสคริปต์ มักถูกใช้ในการประมวลผลข้
อมูลการทำงานเฉพาะทางที่มีการทำงานซ้ำโดยอัตโนมัติ[1]
ตัวshell script เป็นtext file โดยจะประกอบไปด้วยคำสั่งต่างๆที่ ถูกเขียนเพื่อนำมารัoโปรแกรม บนแพลตฟอร์ม Unix หรือ Linux โดยการใช้shell interpreter เช่น bash,sh เป็นต้น ในการสร้างshell script มันจะเริ่มต้นจากการระบุshell interpreterที่จะใช้งานตามด้วยคำสั่งต่างๆ

* Automation : สคริปต์มักถูกใช้เพื่อทำงานในกระบวนการทำงานที่มีความซ้ำซ้อนโดยอัตโนมัติ เช่นการสำรองไฟล์
* Portability : เชลล์สคริปต์สามารถทำงานได้บนแพลตฟอร์มที่หลากหลาย รวมถึงlinux, unix, windows
* Flexibility : เชลล์สริปต์สามารถปรับแต่งได้สูงและสามารถแก้ไขได้ง่ายตามความเหมาะสมที่ผู้ใช้ต้องการ
* Accessibility : เชลล์สคริปต์สามารถเขียนได้ง่ายสามารถแก้ไขได้โดยใช้โปรแกรมแก้ข้อความ
* Integration : เชลล์สคิปต์สามารถรวมเข้ากับเครื่องมือและแอปพลิเคชันอื่นๆได้เช่น ฐานข้อมูล เว็บเซิฟเวอร์
* Debugging : เชลล์สคริปต์นง่ายต่อการดีบัก และเชลล์ส่วนใหญ่มีเครื่องมือการดีบักและการรายงานข้อผิดพลาดในตัวที่สามารถช่วยระบุและแก้ไขปัญหาได้อย่างรวดเร็ว
## คำสั่งพื้นฐานที่ควรทราบ [3]
---
* ls เป็นคำสั่งที่ใช้สำหรับแสดงแฟ้มข้อมูล มากจากคำว่า list
รูปแบบคำสั่ง ls [option] [file]
option ที่มักใช้กันใน ls คือ

        -l จะแสดงผลลัพธ์แบบ Long Format ซึ่งจะแสดง Permission ของแฟ้มด้วย 
        -a จะแสดงแฟ้มข้อมูลทั้งหมด
        -F จะแสดง / หลัง Directory และ * หลังแฟ้มข้อมูลที่ execute ได้
* adduser คำสั่งเพิ่ม User ให้กับระบบ Unix,Linux รูปแบบการใช้งาน

        adduser -g (group) -d (Directory) (User)

* userdel คำสั่งลบ User ออกจากระบบ รูปแบบการใช้งาน 

        userdel [option] (Username)

* passwd 
คำสั่งกำหนดและแก้ไขรหัสผ่านของ User รูปแบบการใช้งาน

        passwd [Username] 

* alias คำสั่งกำหนดคำสั่งย่อ รูปแบบการใช้งาน 

        alias [ชื่อใหม่=ข้อความ] 

* bash คำสั่งเรียกใช้ Bourne again shell รูปแบบการใช้งาน bash

        bash [Enter]

* bc คำสั่งเรียกใช้โปรแกรมคำนวณเลข รูปแบบการใช้งาน 

        bc [-lwsqv] [option] [file]

* cp เป็นคำสั่งที่ใช้สำหรับสำเนาแฟ้มข้อมูล มาจากคำว่า copy รูปแบบคำสั่ง 

        cp source target

* cal คำสั่งแสดงปฏิทิน รูปแบบการใช้งาน

        cal [Enter]

* cat สั่งแสดงข้อความในFile รูปแบบการใช้งาน

        cat /home/user1 

* C Compiler คำสั่งCompile ภาษาCของระบบ Unix,Linux
รูปแบบการใช้งาน

        cc [filename]

* cd คำสั่งChange Directoryของระบบ รูปแบบการใช้งาน 

        cd [directory] 


* chfin คำสั่งChange your finger information เป็นการกำหนดข้อมูลของUserเช่น ชื่อเต็ม ที่อยู่ เบอร์โทรศัพท์ รูปแบบการใช้งาน 

        chfn [username] 

* chgrp คำสั่งChange Group เป็นการเปลี่ยนกลุ่มเจ้าของไฟล์รูปแบบการใช้งาน

        chgrp [-chfRv] (Group) (File)

* chmod คำสั่งChange Modeของระบบ Unix,Linux เป็นการเปลี่ยนสิทธิการเข้าถึงไฟล์ รูปแบบการใช้งาน 

        chmod [สิทธิ] (File)


* chown คำสั่งChange Owner รูปแบบการใช้งาน 

        chown [ซื่อเจ้าของไฟล์] (ชื่อFile)


* chsh คำสั่งchshของระบบ เป็นการเปลี่ยนShell ให้ User
รูปแบบการใช้งาน 

        chsh [Username] 

* clear คำสั่งclearของระบบ เป็นการลบข้อความบนจอภาพ
รูปแบบการใช้งาน 

        clear [enter]

* mesg mesg ดู status การรับการติดต่อของ terminal 

        mesg y เปิดให้ terminal สามารถรับการติดต่อได้ 
        mesg n ปิดไม่ให้ terminal สามารถรับการติดต่อได้

* df คำสั่งเป็นการตรวจสอบการใช้พื่นที่บนฮาร์ดดิสก์
รูปแบบการใช้งาน 

        df [option] [file]

* dmesg คำสั่งdmesg เป็นการให้แสดงผลเหมือนตอน Boot รูปแบบการใช้งาน 

        dmesg [enter]

* echo คำสั่งecho เป็นการให้แสดงข้อความ เหมือนกับ ECHOของDOS
รูปแบบการใช้งาน 

        echo (ข้อความที่ต้องการให้แสดงผล) 

* ed โปรแกรมแก้ไขข้อความใน Text file รูปแบบการใช้งาน
        
        ed (fileName)


* emacs
คำสั่ง emacs โปรแกรมแก้ไขข้อความใน Text file 
รูปแบบการใช้งาน

        emacs (fileName)

* exit คำสั่ง exit ออกจากระบบยูนิกส์ 
รูปแบบการใช้งาน 

        exit [enter]

* grep คำสั่ง grep เป็นการสั่งให้ค้นหาตามเงื่อนไข
รูปแบบการใช้งาน 

        grep (option) 

* halt คำสั่ง halt เป็นการสั่งให้เครื่องหยุดทำงานรูบแบบการใช้งาน 

        halt [-n] [-w] [-d] [-f] [-I] [-p]

* ifconfig 
คำสั่ง history เป็นการตรวจสอบกำหนดค่าNetworkของLan Card
รูปแบบการใช้งาน 

        ifconfig [option]

* kill คำสั่ง kill เป็นคำสั่งสำหรับยกเลิก Process รูปแบบการใช้งาน 
* 
        kill [option] (process ID)

* mkdir เป็นคำสั่งที่ใช้สำหรับการสร้าง directory มาจากคำว่า make directory รูปแบบของคำสั่งmkdir 
* 
        mkdir [option] [file]
        โดย option ที่มักใช้กันใน mkdir คือ 
        -m จะทำการกำหนด Permissioin (ให้ดูคำสั่ง chmod เพิ่มเติม)
        -p จะทำการสร้าง Parent Directory ให้ด้วยกรณีที่ยังไม่มีการระบุ directory ในที่นี้อาจเป็น relativeหรือ absolute path ก็ได้ 

* mv เป็นคำสั่งที่ใช้สำหรับการย้ายแฟ้มข้อมูลและ Directory รวมถึงการเปลี่ยนชื่อด้วย มาจากคำว่า move รูปแบบคำสั่ง

        mv source target

* more คล้ายกับคำสั่ง cat ไม่เหมาะกับการดูข้อมูลที่มีความยาวมากๆ ดังนั้น จึงได้มีการพัฒนา more ขึ้น 
เพื่อช่วยให้สามารถดูข้อมูลที่มีขนาดยาวได้เป็นช่วงๆ 
รูปแบบคำสั่ง 

        more file
        ภายในโปรแกรม more จะมีคำสั่งเพื่อใช้งานคราวๆ ดังนี้ 
        = แสดงเลขบรรทัด
        q ออกจากโปรแกรม
        h แสดง help 

* mount
คำสั่ง mountเป็นคำสั่งเชื่อมต่ออุปกรณ์เข้ากับระบบ 
รูบแบบการใช้งาน 

       mount (-t type) DeviceDriver MountPoint 

* rmdir
เป็นคำสั่งที่ใช้สำหรับการลบ directory มาจากคำว่า remove directory โครงสร้างคำสั่ง 


        rmdir [option] [file] 
        โดย option ที่มักใช้กันใน mkdir คือ -p จะทำการลบ Child และ Parent Directory ตามลำดับ 
        directory ในที่นี้อาจเป็น relative หรือ absolute path ก็ได้


* write คำสั่งใช้เพื่อการส่งข้อมูลทางเดียวจากผู้เขียนไปถึงผู้รับบนเครื่องเดียวกันเท่านั้น
รูปแบบคำสั่ง 

        write user [tty]
* who am i คำสั่งใช้เพื่อแสดงว่าผู้ใช้ซึ่ง login เข้าสู่ระบบนั้น ตัวเราเอง login ด้วยชื่ออะไร 
รูปแบบคำสั่ง

        whoami หรือ who am i 
 
* file 
คำสั่งfileบนระบบ DOS/Windows นั้น ประเภทของแฟ้มข้อมูลจะถูกระบุด้วยนามสกุล แต่ใน UNIX จะไม่มี
นามสกุลเพื่อใช้ระบุประเภทของแฟ้มข้อมูล ดังนั้นการหาประเภทของแฟ้มข้อมูลจะดูจาก Context ภายใน
ของแฟ้ม ซึ่งคำสั่ง file จะทำการอ่าน Content และบอกประเภทของแฟ้มข้อมูลนั้นๆ
รูปแบบคำสั่ง 

        file [option]... file

* hostname
คำสั่งแสดงชื่อเครื่องที่ใช้อยู่ 

        hostname

* tty
แสดงหมายเลข terminal ที่ใช้งานอยู่ 

        tty

* id ใช้แสดงชื่อและกลุ่มมของผู้ใช้งาน 

        id


## การเขียน Shell Script
---

การเขียน Shell script เป็นกระบวนการสร้างสคริปต์ที่ทำงานบน Shell ของระบบปฏิบัติการ Unix/Linux โดย Shell คือโปรแกรมที่รับคำสั่งจากผู้ใช้และส่งให้กับระบบปฏิบัติการเพื่อประมวลผล การเขียน Shell script มักจะเป็นการเรียงคำสั่งเพื่อให้ระบบปฏิบัติการทำงานตามต้องการของผู้ใช้ ดังนั้น ลักษณะการเขียน Shell script ประกอบด้วย:[2]

1. กำหนด Shell: ในบรรทัดแรกของสคริปต์ควรระบุชนิดของ Shell ที่จะใช้ ซึ่งสามารถเป็น Bash, Zsh, Ksh, หรือ Shell อื่น ๆ ตามที่ต้องการ เช่น
   
        #!/bin/bash
2. คำสั่ง: คำสั่งใน Shell script เป็นการระบุและสั่งการให้ระบบปฏิบัติการทำงานตามต้องการ เช่น การเรียกใช้คำสั่ง Linux/Unix หรือการเรียกใช้โปรแกรมที่เขียนขึ้นเอง เช่น 

        echo "Hello, world!"
        ls -l
3. ตัวแปร: การใช้ตัวแปรใน Shell script เพื่อเก็บข้อมูลหรือผลลัพธ์จากคำสั่งอื่น ๆ เพื่อนำไปใช้งานต่อในส่วนต่าง ๆ ของสคริปต์ เช่น 
   
        name="John"
        echo "Hello, $name"
4. คำสั่งเชิงเงื่อนไข: การใช้สั่งเงื่อนไขเพื่อตรวจสอบเงื่อนไขและดำเนินการตามเงื่อนไขที่กำหนด เช่น:
   
        if [ "$name" == "John" ]; then
            echo "Hello, John!"
        else
            echo "Hello, someone else!"
        fi

5. วนลูป: การใช้คำสั่งวนลูปเพื่อทำงานซ้ำซ้อนตามจำนวนรอบที่กำหนด เช่น:
   
        for i in {1..5}; do
            echo "Number: $i"
        done
6. ฟังก์ชัน: การสร้างและใช้งานฟังก์ชันเพื่อรวมโค้ดที่ใช้ซ้ำกันหรือเป็นกลไกการทำงานของสคริปต์ เช่น:

        function greet {
            echo "Hello, $1!"     
        }
        greet "John"

7. การรับค่าอินพุต: การใช้คำสั่ง read เพื่อรับค่าอินพุตจากผู้ใช้เข้าสู่สคริปต์ เช่น:

        echo "Enter your name: " 
        read name
        echo "Hello, $name"
8. การควบคุมกระบวนการ: การใช้คำสั่งสำหรับควบคุมกระบวนการ เช่น การสร้างสำเนาไฟล์, การสร้างไดเรกทอรี, หรือการลบไฟล์ เช่น:

        cp file1.txt file2.txt
        mkdir mydirectory
        rm unwanted.txt


# Reference
https://www.freecodecamp.org/news/bash-scripting-tutorial-linux-shell-script-and-command-line-for-beginners/ [1]

https://saixiii.com/basic-shell-script/ [2]

https://www.nokhosting.com/info/command-line-linux [3]